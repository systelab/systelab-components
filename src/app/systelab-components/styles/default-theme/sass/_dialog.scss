@import "dialog-grid";
@import "dialog-mixins";

/* $content-border-width: defines the border of the slab-dialog-content and ng-dialog-header*/
$content-border-width: 4px;

.slab-dialog-flyin {
  @include slab-dialog-flyin;
}

.slab-dialog-flyout {
  @include slab-dialog-flyout;
}

/* This styles are taken directly from ng-dialog package */

.slab-dialog, .slab-dialog-overlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0
}

/* Remove if you do not want fade outs */

@-webkit-keyframes slab-dialog-fadeout {
  0% {
    opacity: 1
  }
  100% {
    opacity: 0
  }
}

@keyframes slab-dialog-fadeout {
  0% {
    opacity: 1
  }
  100% {
    opacity: 0
  }
}

@-webkit-keyframes slab-dialog-fadein {
  0% {
    opacity: 0
  }
  100% {
    opacity: 1
  }
}

@keyframes slab-dialog-fadein {
  0% {
    opacity: 0
  }
  100% {
    opacity: 1
  }
}

.slab-dialog {
  box-sizing: border-box;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  z-index: 10000
}

.slab-dialog *, .slab-dialog :after, .slab-dialog :before {
  box-sizing: inherit
}

.slab-dialog.slab-dialog-disabled-animation, .slab-dialog.slab-dialog-disabled-animation .slab-dialog-content, .slab-dialog.slab-dialog-disabled-animation .slab-dialog-overlay {
  -webkit-animation: none !important;
  animation: none !important
}

.slab-dialog-overlay {
  background: rgba(0, 0, 0, .4);
  -webkit-backface-visibility: hidden
}

.slab-dialog.slab-dialog-closing .slab-dialog-overlay {
  -webkit-backface-visibility: hidden
}

.slab-dialog-content {
  background: #fff;
  -webkit-backface-visibility: hidden;
  pointer-events: all
}

.slab-dialog.slab-dialog-closing .slab-dialog-content {
  -webkit-backface-visibility: hidden
}

.slab-dialog-no-overlay {
  pointer-events: none
}

.slab-dialog-close:before {
  font-family: Helvetica, Arial, sans-serif;
  content: '\00D7';
  cursor: pointer
}

.slab-dialog {
  $content-border-width: 4px;

  @include position(fixed, $top: 50%, $left: 50%);

  @include size(100%);

  overflow: visible; /* Fullscreen by default */

  /* Styles for non full-screen and fixed size dialogs with dark button bar */
  &[class*="uk-height-"],
  &[class*="uk-width-"],
  &.slab-dialog-fixed-size {
    .slab-dialog-content {
      z-index: 2;
      border: $content-border-width solid $slab-dialog-border-color;
      background-color: $slab-dialog-border-color;
      border-radius: 5px;

      .slab-dialog-header {
        border-radius: $content-border-width $content-border-width 0 0;
      }

      .slab-dialog-buttons {
        background: $background;
        border-radius: 0 0 4px 4px;
      }
    }
  }

  /* Styles for full-screen dialogs with white button bar */
  &.uk-height-1-1,
  &.uk-width-1-1 {
    .slab-dialog-content {
      z-index: 2;
      border: none;
      border-radius: 0;

      .slab-dialog-header {
        border-radius: 0;
      }

      .slab-dialog-buttons {
        background: $background;
        border-radius: 0;
      }
    }
  }

  &.slab-dialog-closing .slab-dialog-content {
    @include animation(slab-dialog-flyout, 0.5s);
  }

  .slab-dialog-content {
    @include position(relative, $top: -50%, $left: -50%);

    @include animation(slab-dialog-flyin, 0.5s);

    @include size(100%);

    z-index: 2;

    border: none;
    border-radius: 0;
    background: transparent;

    .slab-dialog-header {
      /* $padding-header: defines the padding of the slab-dialog-header;
                          used to calculate the line-height of the slab-dialog-header.*/
      $padding-header: 20px;

      padding: $padding-header;
      font-size: 20px;
      border-radius: 0;
      background: $primary-color;
      max-height: $ng-dialog-header-height;
      height: $ng-dialog-header-height;
      line-height: $ng-dialog-header-height - $padding-header * 2;
      box-sizing: border-box;
      color: $background;
    }

    .slab-dialog-message {
      height: calc(100% - #{$ng-dialog-header-height});

      &.with-buttons {
        height: calc(100% - #{$ng-dialog-header-height} - #{$ng-dialog-buttons-height}) !important;
      }

      overflow-y: hidden;
      background: $background;
    }

    .slab-dialog-buttons {
      /* $buttons-padding: defines the padding of the slab-dialog-buttons;
                           used to calculate the $button-size value.*/
      $buttons-padding: ceil(14px * $size_percentage);

      @include position(absolute, $right: 0, $bottom: 0, $left: 0);

      max-height: $ng-dialog-buttons-height + 1;
      padding: $buttons-padding;
      box-sizing: border-box;
      border-top: 1px solid $background-hemohub;
      background: $darker-gray;

      .uk-button.uk-float-right + .uk-button.uk-float-right {
        margin-right: 0.25em;
      }

      // Smaller buttons before $breakpoint-huge
      @media (max-width: $breakpoint-huge) {
        &.slab-dialog-buttons-condensed {
          .uk-button,
          .uk-button-large {
            padding: 0 5px;
          }
        }
      }

      // Larger icons after $breakpoint-huge
      @media (min-width: $breakpoint-huge) {
        &.slab-dialog-buttons-condensed {
          .uk-button,
          .uk-button-large {
            i {
              @include position(relative, $top: 2px);

              font-size: 18px;
            }
          }
        }
      }

      .uk-button {
        /* $button-size: defines the line-height and the min-height of the uk-button;
                         defines the size, the min-width and the min-height of the square button;
                         used to calculate the $top-offset variable;
                         used to calculate the size of the slab-dialog-close button;
                         defines the line-height and the width of the before class of the slab-dialog-close.*/
        $button-size: $ng-dialog-buttons-height - $buttons-padding * 2 - 2;

        line-height: $button-size;
        min-height: $button-size;

        &.square {
          @include size($button-size);

          min-width: $button-size;
          line-height: 1;

          //Fixing for smaller sizes (such as $size_percentage = 0.7)
          min-height: $button-size;
          padding: 0;
        }
      }
    }
    $button-size: ceil($size_percentage * 54px);
    /* $button-fontsize: defines the font-size of the slab-dialog-close before and the i element inside the slab-dialog-close.*/
    $button-fontsize: ceil($size_percentage * 32px);
    /* $right-offset: defines the right position of the slab-dialog-buttons-top. */
    $right-offset: ceil($size_percentage * 66px);
    /* $top-offset: defines the top position of the slab-dialog-buttons-top;
                    used to define the top position of the slab-dialog-close.*/
    $top-offset: ($ng-dialog-header-height - $button-size) / 2;

    .slab-dialog-buttons-top > div,
    .slab-dialog-close {
      @include size($button-size);

      display: inline-block;
      cursor: pointer;
      background-color: $primary-color-darken;
      text-align: center;
      border-radius: 5px;
      color: $background;
      margin-right: 6px;
      vertical-align: top;

      i,
      &:before {
        @include size($button-size);

        @include font-smoothing(antialiased);

        line-height: $button-size;
        width: $button-size;
        color: $background;
        font-size: $button-fontsize;
        font-family: icomoon;
      }

      &:hover {
        background-color: $primary-color-darken-hover;
      }
    }

    .slab-dialog-buttons-top {
      @include position(absolute, $top: $top-offset, $right: $right-offset);

      width: auto;

      > div {
        // Fixed spacing elemens inline-block type, which are line breaks between them in code
        float: left;
      }
    }

    .slab-dialog-close {
      @include position(absolute, $top: $top-offset, $right: 3px);

      &:before {
        @include position(absolute, $right: 0);

        content: "\F057" !important;
      }
    }
  }
}

